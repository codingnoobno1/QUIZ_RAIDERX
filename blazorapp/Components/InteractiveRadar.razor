@* blazorapp/Components/InteractiveRadar.razor *@

<div class="radar-container" style="--size: @(Size)px; --color: @Color;">
    <svg viewBox="0 0 100 100">
        <!-- Background Rings -->
        <circle cx="50" cy="50" r="10" class="radar-grid" />
        <circle cx="50" cy="50" r="25" class="radar-grid" />
        <circle cx="50" cy="50" r="40" class="radar-grid" />
        
        <!-- Crosshairs -->
        <line x1="50" y1="10" x2="50" y2="90" class="radar-grid" />
        <line x1="10" y1="50" x2="90" y2="50" class="radar-grid" />
        
        <!-- Rotating Scanner -->
        <path d="M 50,50 L 50,10 A 40,40 0 0 1 90,50 Z" class="scanner" fill="url(#radar-grad-@Color)" />
        
        <!-- Interaction Points -->
        @foreach (var p in _points)
        {
            <circle cx="@p.X" cy="@p.Y" r="2" class="point" />
        }
    </svg>
    <div class="radar-overlay"></div>
    
    <defs>
        <radialGradient id="radar-grad-@Color">
            <stop offset="0%" stop-color="@Color" stop-opacity="0.3" />
            <stop offset="100%" stop-color="@Color" stop-opacity="0" />
        </radialGradient>
    </defs>
</div>

<style>
    .radar-container {
        width: var(--size);
        height: var(--size);
        background: #000;
        border-radius: 50%;
        border: 1px solid rgba(0, 255, 255, 0.2);
        position: relative;
        overflow: hidden;
    }

    svg {
        width: 100%;
        height: 100%;
    }

    .radar-grid {
        stroke: rgba(0, 255, 255, 0.1);
        stroke-width: 0.5;
        fill: none;
    }

    .scanner {
        transform-origin: 50px 50px;
        animation: radar-sweep 4s linear infinite;
    }

    .point {
        fill: var(--color);
        filter: drop-shadow(0 0 3px var(--color));
        animation: point-flicker 2s infinite alternate;
    }

    .radar-overlay {
        position: absolute;
        inset: 0;
        background: radial-gradient(circle at center, transparent 30%, rgba(0, 0, 0, 0.5) 100%);
        pointer-events: none;
    }

    @keyframes radar-sweep {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    @keyframes point-flicker {
        0%, 100% { opacity: 0.2; }
        50% { opacity: 1; }
    }
</style>

@code {
    [Parameter] public int Size { get; set; } = 200;
    [Parameter] public string Color { get; set; } = "#00FFFF";
    
    private List<(int X, int Y)> _points = new();

    protected override void OnInitialized()
    {
        var rnd = new Random();
        for (int i = 0; i < 5; i++)
        {
            var r = rnd.Next(10, 40);
            var angle = rnd.NextDouble() * Math.PI * 2;
            var x = (int)(50 + r * Math.Cos(angle));
            var y = (int)(50 + r * Math.Sin(angle));
            _points.Add((x, y));
        }
    }
}
